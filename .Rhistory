setwd("E:/Project_IIMC/HaryanaSoilNutrientDataExtracter")
fileName <- "SoilData_Abhishek/447.csv"
a<-read.csv(fileName,skip = 5)
a
head(a)
tail(a)
names <- grep("Textbox",colnames(a))
names
names <- grepl("Textbox",colnames(a))
names
names <- colnames(a)[-c(grep("Textbox",colnames(a)))]
names
a1 <- a[names,]
head(a1)
a1 <- a[,names]
head(a1)
a1 <- a1[,-c(15)]
head(a1)
colnames(a1) <- c("BlockName","SampleNo","pH","EC","OC","N","P","K","S","Zn","Fe","Cu","Mn")
head(a1)
split("8.00 MA1"," ")
split("8.00 MA1"," ")[1]
split("8.00 MA1",' ')[1]
strsplit("8.00 MA1",' ')[1]
strsplit("8.00 MA1",' ')[1][0]
strsplit("8.00 MA1",' ')[[1]]
strsplit("8.00 MA1",' ')[[1]][1]
tapply(a1[,3:14], FUN = function(x){strsplit(x,' ')[[1]][1]})
?tapply
?apply
a2 <- lapply(a1[,3:14], FUN = function(x){strsplit(x,' ')[[1]][1]})
a2 <- lapply(a1[,3:14], FUN = function(x){if(!is.na(x)){strsplit(x,' ')[[1]][1]}})
a2 <- lapply(a1[,3:14], FUN = function(x){x<-strsplit(x,' ')[[1]][1]})
a2 <- lapply(a1[,3], FUN = function(x){cat(x)})
head(a1)
head(a2)
a2 <- lapply(a1[,3], FUN = function(x){print(x)})
a<-read.csv(fileName,skip = 5, stringsAsFactors = F)
names <- colnames(a)[-c(grep("Textbox",colnames(a)))]
names
a1 <- a[,names]
head(a1)
a1 <- a1[,-c(15)]
colnames(a1) <- c("BlockName","SampleNo","pH","EC","OC","N","P","K","S","Zn","Fe","Cu","Mn")
head(a1)
a2 <- lapply(a1[,3], FUN = function(x){print(x)})
a2 <- lapply(a1[,3:14], FUN = function(x){strsplit(x,' ')[[1]][1]})
head(a1)
str(a1)
a2 <- lapply(a1[,3], FUN = function(x){strsplit(x,' ')[[1]][1]})
a2
a2 <- sapply(a1[,3], FUN = function(x){strsplit(x,' ')[[1]][1]})
a2
a2 <- sapply(a1[,3], FUN = function(x){if(!is.na(x)){strsplit(x,' ')[[1]][1]}})
head(a2)
a2[2]
a2 <- sapply(a1[,3:15], FUN = function(x){if(!is.na(x)){strsplit(x,' ')[[1]][1]}})
a2 <- sapply(a1[,3:14], FUN = function(x){if(!is.na(x)){strsplit(x,' ')[[1]][1]}})
head(a2)
a2 <- tapply(a1[,3:14], FUN = function(x){if(!is.na(x)){strsplit(x,' ')[[1]][1]}})
a2 <- apply(a1[,3:14], FUN = function(x){if(!is.na(x)){strsplit(x,' ')[[1]][1]}})
a2 <- sapply(a1[,3:14], FUN = function(x){if(!is.na(x)){strsplit(x,' ')[[1]][1]}})
a2[1]
a2[[1]]
a2[[2]]
a2[[3]]
head(a1,2)
a2[1]$pH
a2[]$pH
a2[]
a2
a2 <- unlist(sapply(a1[,3:14], FUN = function(x){if(!is.na(x)){strsplit(x,' ')[[1]][1]}}))
a2
a2<-strsplit(a1[,3],' ')
a2
a2<-strsplit(a1[,3],' ')[[1]][1]
a2
a2<-strsplit(a1[,3],' ')[[1]]
a2
a2<-strsplit(a1[,3],' ')[[]][1]
a2<-strsplit(a1[,3],' ')[[
]]
a2<-strsplit(a1[,3],' ')[1]
a2
a2<-unlist(strsplit(a1[,3],' '))
a2
a2<-unlist(strsplit(a1[,3],' ')[1])
a2
a2<-unlist(strsplit(a1[,3],' '))
fileName <- "SoilData_Abhishek/447.csv"
a<-read.csv(fileName,skip = 5, stringsAsFactors = F)
names <- colnames(a)[-c(grep("Textbox",colnames(a)))]
names
a1 <- a[,names]
head(a1)
a1 <- a1[,-c(15)]
colnames(a1) <- c("BlockName","SampleNo","pH","EC","OC","N","P","K","S","Zn","Fe","Cu","Mn")
View(a1)
colnames(a1) <- c("BlockName","SampleNo","pH","EC","OC","N","P","K","S","Zn","Fe","Cu","Mn","B")
a2 <- sapply(strsplit(a1$pH), head,1)
a2 <- sapply(strsplit(a1$pH, ' '), head,1)
a2
a2 <- unlist(sapply(strsplit(a1$pH, ' '), head,1))
a2
a1$pH <- unlist(sapply(strsplit(a1$pH, ' '), head,1))
tail(a1)
sum(is.na(a1$pH))
sum(is.na(a1$B))
tail(a2)
tail(a1$pH)
head(a2)
head(a1$pH)
head(a1)
tail(a1)
a1$pH <- unlist(sapply(strsplit(a1$pH, ' '), head,1))
sum(grepl(' ', a1$pH))
a2 <- unlist(sapply(if(grepl(' ',a1$pH){strsplit(a1$pH, ' ')}, head,1))
sum(is.na(a1$B))
tail(a2)
tail(a1)
head(a2)
head(a1)
a2 <- unlist(sapply(if(grepl(' ',a1$pH){strsplit(a1$pH, ' ')}, head,1))
sum(is.na(a1$B))
tail(a2)
tail(a1)
head(a2)
head(a1)
a2 <- unlist(sapply(if(grepl(' ',a1$pH){strsplit(a1$pH, ' ')}, head,1)))
a2 <- unlist(sapply(if(grepl(' ',a1$pH)){strsplit(a1$pH, ' ')}, head,1)))
a2 <- unlist(sapply(if(grepl(' ',a1$pH)){strsplit(a1$pH, ' ')}), head,1)
a2 <- unlist(sapply(a1$pH, if(grepl(' ',a1$pH)){strsplit(a1$pH, ' ')}), head,1)
a2 <- unlist(sapply(a1$pH, function(x){if(grepl(' ',x)){strsplit(x, ' ')}else{a1$pH}}), head,1)
a2
a2 <- unlist(sapply(a1$pH, function(x){if(grepl(' ',x)){head(strsplit(x, ' '),1)}else{a1$pH}}))
a2
a2 <- unlist(sapply(a1$pH, function(x){if(grepl(' ',x)){head(strsplit(x, ' '),1)}))
sum(is.na(a1$B))
tail(a2)
tail(a1)
head(a2)
head(a1)
a2 <- unlist(sapply(a1$pH, function(x){if(grepl(' ',x)){head(strsplit(x, ' '),1)}}))
head(a2)
function(x)
{
if(grepl(' ',x))
{
return(head(strsplit(x, ' '),1))
}
else
{
return(x)
}
}
fn <- function(x)
{
if(grepl(' ',x))
{
return(head(strsplit(x, ' '),1))
}
else
{
return(x)
}
}
fn("100 22")
fn <- function(x)
{
if(grepl(' ',x))
{
return(strsplit(x, ' ')[[1]][1])
}
else
{
return(x)
}
}
fn("100 22")
a2 <- unlist(sapply(a1$pH, fn))
head(a2)
a2 <- unlist(lapply(a1$pH, fn))
head(a2)
a1$pH <- unlist(lapply(a1$pH, fn))
a2 <- unlist(lapply(a1[,4:5], fn))
head(a2)
fileName <- "SoilData_Abhishek/447.csv"
a<-read.csv(fileName,skip = 5, stringsAsFactors = F)
names <- colnames(a)[-c(grep("Textbox",colnames(a)))]
names
a1 <- a[,names]
head(a1)
a1 <- a1[,-c(15)]
colnames(a1) <- c("BlockName","SampleNo","pH","EC","OC","N","P","K","S","Zn","Fe","Cu","Mn","B")
fn <- function(x)
{
if(grepl(' ',x))
{
return(strsplit(x, ' ')[[1]][1])
}
else
{
return(x)
}
}
for(i in (3:14))
{
a1[,i] <- unlist(lapply(a1[,i], fn))
}
head(a1)
for(f in dir(dirName))
{
print(f)
}
dirName <- "SoilData_Abhishek"
for(f in dir(dirName))
{
print(f)
}
blockId <- strsplit("447.csv",".")[[1]][1]
blockId
strsplit("447.csv",".")[[1]][1]
strsplit("447.csv",'.')[[1]][1]
strsplit("447.csv",'.')
strsplit("447.csv",'\.')
strsplit("447.csv",'/.')
strsplit("447.csv",'\\.')
strsplit("447.csv",'[.]')
strsplit("447.csv",'[.]')[[1]][1]
dirName <- "SoilData_Abhishek"
df <- data.frame()
for(f in dir(dirName))
{
blockId <- strsplit(f,'\\.')[[1]][1]
fileName <- paste(dirName, f, "/")
a<-read.csv(fileName,skip = 5, stringsAsFactors = F)
names <- colnames(a)[-c(grep("Textbox",colnames(a)))]
a <- a[,names]
a <- a[,-c(15)]
colnames(a) <- c("BlockName","SampleNo","pH","EC","OC","N","P","K","S","Zn","Fe","Cu","Mn","B")
a$BlockId <- BlockId
if(nrow(df)==0)
{
df<-a
}
else
{
df<-rbind(df,a)
}
}
dirName <- "SoilData_Abhishek"
df <- data.frame()
for(f in dir(dirName))
{
blockId <- strsplit(f,'\\.')[[1]][1]
fileName <- paste(dirName, f, sep = "/")
a<-read.csv(fileName,skip = 5, stringsAsFactors = F)
names <- colnames(a)[-c(grep("Textbox",colnames(a)))]
a <- a[,names]
a <- a[,-c(15)]
colnames(a) <- c("BlockName","SampleNo","pH","EC","OC","N","P","K","S","Zn","Fe","Cu","Mn","B")
a$BlockId <- BlockId
if(nrow(df)==0)
{
df<-a
}
else
{
df<-rbind(df,a)
}
}
dirName <- "SoilData_Abhishek"
df <- data.frame()
for(f in dir(dirName))
{
blockId <- strsplit(f,'\\.')[[1]][1]
fileName <- paste(dirName, f, sep = "/")
a<-read.csv(fileName,skip = 5, stringsAsFactors = F)
names <- colnames(a)[-c(grep("Textbox",colnames(a)))]
a <- a[,names]
a <- a[,-c(15)]
colnames(a) <- c("BlockName","SampleNo","pH","EC","OC","N","P","K","S","Zn","Fe","Cu","Mn","B")
a$BlockId <- blockId
if(nrow(df)==0)
{
df<-a
}
else
{
df<-rbind(df,a)
}
}
head(df)
sum(is.na(df$N))
sum(is.na(df$B))
fn <- function(x)
{
if(grepl(' ',x))
{
return(strsplit(x, ' ')[[1]][1])
}
else
{
return(x)
}
}
for(i in (3:14))
{
df[,i] <- unlist(lapply(df[,i], fn))
}
head(df)
write.csv(x = df,file = paste0(dirName,".csv"))
rm(list=ls())
